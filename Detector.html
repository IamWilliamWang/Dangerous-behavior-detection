<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module Detector</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>Detector</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:e%3A%5Cpycharmprojects%5Ccannyvideopython%5Cdetector.py">e:\pycharmprojects\cannyvideopython\detector.py</a></font></td></tr></table>
    <p></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="cv2.cv2.html">cv2.cv2</a><br>
</td><td width="25%" valign=top><a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top></td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="builtins.html#object">builtins.object</a>
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="Detector.html#Detector">Detector</a>
</font></dt><dt><font face="helvetica, arial"><a href="Detector.html#PlotUtil">PlotUtil</a>
</font></dt><dt><font face="helvetica, arial"><a href="Detector.html#Transformer">Transformer</a>
</font></dt><dt><font face="helvetica, arial"><a href="Detector.html#VideoFileUtil">VideoFileUtil</a>
</font></dt></dl>
</dd>
</dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="Detector">class <strong>Detector</strong></a>(<a href="builtins.html#object">builtins.object</a>)</font></td></tr>
    
<tr><td bgcolor="#ffc8d8"><tt>&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="Detector-GetNoChangeEdges_fromSteam"><strong>GetNoChangeEdges_fromSteam</strong></a>(self, inputStream, frame_count=20, outputEdgesFilename=None)</dt><dd><tt>从输入流中提取不动物体的Edges帧<br>
:param&nbsp;inputStream:&nbsp;输入文件流<br>
:param&nbsp;frame_count:&nbsp;要读取的帧数<br>
:param&nbsp;outputEdgesFilename:&nbsp;EdgesFrame全部输出到视频为该名的文件中（测试用）<br>
:return:&nbsp;不动物体的Edges帧、原本的彩色帧组</tt></dd></dl>

<dl><dt><a name="Detector-GetNoChangeEdges_fromVideo"><strong>GetNoChangeEdges_fromVideo</strong></a>(self, videoFilename, startFrameRate=0.0, endFrameRate=1.0, outputEdgesFilename=None)</dt><dd><tt>从视频文件中提取不动物体的帧<br>
:param&nbsp;videoFilename:&nbsp;文件名<br>
:param&nbsp;startFrameRate:&nbsp;开始读取帧处于视频的比例，必须取0-1之间<br>
:param&nbsp;endFrameRate:&nbsp;结束读取帧处于视频的比例，必须取0-1之间<br>
:param&nbsp;outputEdgesFilename:&nbsp;EdgesFrame全部输出到视频为该名的文件中（测试时用）<br>
:return:&nbsp;不动物体的Edges帧</tt></dd></dl>

<dl><dt><a name="Detector-IsWarningStatusChanged"><strong>IsWarningStatusChanged</strong></a>(self, exceptionOccurred, consecutiveOccurrencesNumber=3)</dt><dd><tt>显示warning状态是否需要改变，True为需要显示Warning。False为需要关闭Warning。None为保持不变<br>
:param&nbsp;exceptionOccurred:&nbsp;是否发生异常<br>
:param&nbsp;consecutiveOccurrencesNumber:&nbsp;连续几次同样时间发生后给予改变当前警报状态的指示<br>
:return:</tt></dd></dl>

<dl><dt><a name="Detector-LinesEquals"><strong>LinesEquals</strong></a>(self, lines1, lines2, comparedLinesCount)</dt><dd><tt>HoughLines函数返回的lines判断是否相等<br>
:param&nbsp;lines1:&nbsp;第一个lines<br>
:param&nbsp;lines2:&nbsp;第二个lines<br>
:param&nbsp;comparedLinesCount:&nbsp;比较前几条line<br>
:return:&nbsp;是否二者相等</tt></dd></dl>

<dl><dt><a name="Detector-ReadFrames"><strong>ReadFrames</strong></a>(self, stream, readFramesCount)</dt><dd><tt>从输入流中读取readFramesCount个帧并返回，如果没有读取则返回None<br>
:param&nbsp;stream:&nbsp;输入流<br>
:param&nbsp;readFramesCount:&nbsp;要读取的帧数<br>
:return:</tt></dd></dl>

<dl><dt><a name="Detector-StartUsingFileStream"><strong>StartUsingFileStream</strong></a>(self, videoFilename='开关柜3.mp4', compareLineCount=3, videoClipCount=26)</dt><dd><tt>针对视频文件进行的开关柜检测主函数<br>
:param&nbsp;videoFilename:&nbsp;视频文件名<br>
:param&nbsp;compareLineCount:&nbsp;需要比较几条线是一样的<br>
:param&nbsp;videoClipCount:&nbsp;视频要分成多少段<br>
:return:</tt></dd></dl>

<dl><dt><a name="Detector-StartUsingVideoStream"><strong>StartUsingVideoStream</strong></a>(self, source='rtsp://admin:1234abcd@192.168.1.64', compareLineCount=3)</dt><dd><tt>解析输入视频流，并在柜子出现变动时输出警告<br>
:param&nbsp;source:&nbsp;视频源<br>
:param&nbsp;compareLineCount:&nbsp;需要比较的主要线条个数<br>
:return:</tt></dd></dl>

<dl><dt><a name="Detector-__init__"><strong>__init__</strong></a>(self)</dt><dd><tt>Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="PlotUtil">class <strong>PlotUtil</strong></a>(<a href="builtins.html#object">builtins.object</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>用于显示图片的帮助类。可以在彩图中画霍夫线<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Static methods defined here:<br>
<dl><dt><a name="PlotUtil-PaintLinesOnImage"><strong>PaintLinesOnImage</strong></a>(img, houghLines, paintLineCount=1)</dt><dd><tt>在彩色图中划指定条霍夫线，线段的优先级由长到短<br>
:param&nbsp;img:&nbsp;BGR图片<br>
:param&nbsp;houghLines:&nbsp;霍夫线，即HoughLines函数返回的变量<br>
:param&nbsp;paintLineCount:&nbsp;要画线的个数<br>
:return:</tt></dd></dl>

<dl><dt><a name="PlotUtil-PutText"><strong>PutText</strong></a>(img, text, location=(30, 30))</dt><dd><tt>在彩图img上使用默认字体写字<br>
:param&nbsp;img:&nbsp;需要放置文字的图片<br>
:param&nbsp;text:&nbsp;要写上去的字<br>
:param&nbsp;location:&nbsp;字的位置<br>
:return:</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="Transformer">class <strong>Transformer</strong></a>(<a href="builtins.html#object">builtins.object</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>图像转换器，负责图像的读取，变灰度，边缘检测和线段识别。<br>
《请遵守以下命名规范：前缀image、img代表彩色图。前缀为gray代表灰度图。前缀为edges代表含有edge的黑白图。前缀为lines代表edges中各个线段的结构体。前缀为static代表之后的比较要以该变量为基准进行比较。可以有双前缀》<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Static methods defined here:<br>
<dl><dt><a name="Transformer-GetEdgesFromGray"><strong>GetEdgesFromGray</strong></a>(grayFrame)</dt><dd><tt>将灰度图调用canny检测出edges，返回灰度edges图<br>
:param&nbsp;grayFrame:&nbsp;灰度图<br>
:return:&nbsp;含有各个edges的黑白线条图</tt></dd></dl>

<dl><dt><a name="Transformer-GetEdgesFromImage"><strong>GetEdgesFromImage</strong></a>(imageBGR)</dt><dd><tt>将彩色图转变为带有所有edges信息的黑白线条图<br>
:param&nbsp;imageBGR:&nbsp;彩色图<br>
:return:</tt></dd></dl>

<dl><dt><a name="Transformer-GetGrayFromBGRImage"><strong>GetGrayFromBGRImage</strong></a>(image)</dt><dd><tt>将读取的BGR转换为单通道灰度图<br>
:param&nbsp;image:&nbsp;BGR图片<br>
:return:&nbsp;灰度图</tt></dd></dl>

<dl><dt><a name="Transformer-GetLinesFromEdges"><strong>GetLinesFromEdges</strong></a>(edgesFrame, threshold=200)</dt><dd><tt>单通道灰度图中识别内部所有线段并返回<br>
:param&nbsp;edgesFrame:&nbsp;edges图<br>
:param&nbsp;threshold:&nbsp;阈值限定，线段越明显阈值越大。小于该阈值的线段将被剔除<br>
:return:</tt></dd></dl>

<dl><dt><a name="Transformer-Imread"><strong>Imread</strong></a>(filename_unicode)</dt><dd><tt>读取含有unicode文件名的图片<br>
:param&nbsp;filename_unicode:&nbsp;含有unicode的图片名<br>
:return:</tt></dd></dl>

<dl><dt><a name="Transformer-IsGrayImage"><strong>IsGrayImage</strong></a>(grayOrImg)</dt><dd><tt>检测是否为灰度图，灰度图为True，彩图为False<br>
:param&nbsp;grayOrImg:&nbsp;图片<br>
:return:&nbsp;是否为灰度图</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="VideoFileUtil">class <strong>VideoFileUtil</strong></a>(<a href="builtins.html#object">builtins.object</a>)</font></td></tr>
    
<tr><td bgcolor="#ffc8d8"><tt>&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%">Static methods defined here:<br>
<dl><dt><a name="VideoFileUtil-CloseVideos"><strong>CloseVideos</strong></a>(inputVideoStream=None, outputVideoStream=None)</dt><dd><tt>关闭输入输出视频文件<br>
:param&nbsp;inputVideoStream:&nbsp;输入文件流<br>
:param&nbsp;outputVideoStream:&nbsp;输出文件流<br>
:return:</tt></dd></dl>

<dl><dt><a name="VideoFileUtil-OpenInputVideo"><strong>OpenInputVideo</strong></a>(inputVideoFilename)</dt><dd><tt>打开输入视频文件<br>
:param&nbsp;inputVideoFilename:&nbsp;输入文件名<br>
:return:&nbsp;输入文件流</tt></dd></dl>

<dl><dt><a name="VideoFileUtil-OpenOutputVideo"><strong>OpenOutputVideo</strong></a>(outputVideoFilename, inputFileStream, outputVideoEncoding='DIVX')</dt><dd><tt>打开输出视频文件<br>
:param&nbsp;outputVideoFilename:&nbsp;输出文件名<br>
:param&nbsp;inputFileStream:&nbsp;输入文件流（用户获得视频基本信息）<br>
:param&nbsp;outputVideoEncoding:&nbsp;输出文件编码<br>
:return:&nbsp;输出文件流</tt></dd></dl>

<dl><dt><a name="VideoFileUtil-OpenVideos"><strong>OpenVideos</strong></a>(inputVideoFilename=None, outputVideoFilename=None, outputVideoEncoding='DIVX')</dt><dd><tt>打开输入输出视频文件<br>
:param&nbsp;inputVideoFilename:&nbsp;输入文件名<br>
:param&nbsp;outputVideoFilename:&nbsp;输出文件名<br>
:param&nbsp;outputVideoEncoding:&nbsp;输出文件的视频编码<br>
:return:&nbsp;输入输出文件流</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table></td></tr></table>
</body></html>